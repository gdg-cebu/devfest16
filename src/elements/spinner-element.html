<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="spinner-element">
  <template>

    <style>
      :host(.hidden) {
        display: none;
      }

      .loader {
        width: 28px;
        margin: 0 auto;
        position: relative;
      }

      .loader::before {
        content: "";
        display: block;
        padding-top: 100%;
      }

      .circular {
        width: 100%;
        height: 100%;
        margin: auto;
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        transform-origin: center center;
        animation: rotate 2s linear infinite;
      }

      .path {
        stroke-dasharray: 1, 200;
        stroke-dashoffset: 0;
        stroke-linecap: round;
        animation: dash 1.5s ease-in-out infinite, color 6s ease-in-out infinite;
      }

      @keyframes rotate {
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes dash {
        0% {
          stroke-dasharray: 1, 200;
          stroke-dashoffset: 0;
        }

        50% {
          stroke-dasharray: 89, 200;
          stroke-dashoffset: -35px;
        }

        100% {
          stroke-dasharray: 89, 200;
          stroke-dashoffset: -124px;
        }
      }

      @keyframes color {
        100%,
        0% {
          stroke: #F44336;
        }

        40% {
          stroke: #2196F3;
        }

        66% {
          stroke: #4CAF50;
        }

        80%,
        90% {
          stroke: #FFEB3B;
        }
      }
    </style>

    <div class="showbox">
      <div class="loader">
        <svg class="circular" viewBox="25 25 50 50">
          <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="5" stroke-miterlimit="10"/>
        </svg>
      </div>
    </div>

  </template>

  <script>
    (function() {
      'use strict';

      Polymer({

        is: 'spinner-element',

        properties: {
          active: {
            type: Boolean,
            value: false,
            observer: '_activePropertyChanged'
          }
        },

        _activePropertyChanged: function() {
          if (this.active) {
            this.classList.remove('hidden');
          } else {
            this.classList.add('hidden');
          }
        }
      });

    })();
  </script>
</dom-module>
